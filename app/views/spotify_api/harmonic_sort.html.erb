<div class="playlist_tracks container-fluid d-flex justify-content-center flex-wrap w-100">
  <div class="sidebar">
    <%= render "layouts/sidebar"%>
  </div>
  <div class="row">
    <div class="col-12">
      <header class="playlist-tracks-header">
        <div class="playlist-tracks-header-text mt-5 mb-5 d-flex justify-content-start align-items-center">
          <div class="p-3">
            <%= image_tag @playlist.images.first["url"], size: 200 %>
          </div>
          <div class= "w-50 px-5">
            <h1>Harmonic Sorting</h1>
            <p>Sort your Spotify playlists by any of a wide range of musical attributes such as BPM, key, energy, danceability or leave it up to BiteJockey's algorithm to return the playlists best playable order! </p>
          </div>
          <div class="px-3">
            <%= image_tag 'camelot_wheel.png', class: "camelot-image" %>
          </div>
        <div>
      </header>
    </div>
  </div>

  <div class="tracks_container mb-5 d-flex justify-content-around">
    <div class="row">
      <div class="col">
        <div class="grid ps-5" data-controller='sortable' id="harmonic-cards">
          <div class="grid-heading d-flex justify-content-between">
            <h1 class="mb-3"><%= @playlist.name %></h1>
            <div class="container button-container">
              <div class="button-group m-3">
                <button class="update-playlist-button btn btn-success">Update Playlist</button>
                <button class="create-playlist-button btn btn-success">Create New Playlist</button>
              </div>
            </div>
          </div>
          <% counter = 1 %>
          <% @tracks.each do |track| %>
            <div class="harmonic-track-card border border-white shadow mb-2 p-3" data-uri-value=<%= track[:uri]%> data-camelot-key=<%= track[:camelot]%>>
              <div class="track-features d-flex justify-content-between align-items-center">
                <div class="track-title-artist">
                  <h4 class="mb-2"><% counter %> <%= track[:name]  %></h4>
                  <p><%= track[:artist] %></p>
                </div>
                <div class="track-audio-features d-flex justify-content-between">
                  <div class="mx-3 d-flex align-items-center flex-column">
                    <span class="d-flex"><p>Key: </p><p class="key-text ms-2"><%= track[:key_text] %></p></span>
                    <span class="d-flex"><p>Camelot Key: </p><p class="key ms-2"><%= track[:camelot] %></p></span>
                    <span class="d-flex"><p class="key ms-2" style="color: transparent;"><%= track[:key] %></p></span>
                  </div>
                  <div class="mx-3">
                    <span class="d-flex"><p>BPM: </p><p class="bpm ms-2"><%= track[:bpm] %></p></span>
                    <span class="d-flex"><p>Danceability: </p><p class="danceability ms-2"><%= track[:danceability] %></p></span>
                    <span class="d-flex"><p>Energy: </p><p class="energy ms-2"><%= track[:energy] %></p></span>
                  </div>
                </div>
              </div>
            </div>
            <% counter += 1 %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

  <script id="my_vars_json" type="text/json">
      <%= raw @my_vars.to_json %>
  </script>
