<%= javascript_pack_tag 'isotope.js' %>

<div class="container">
  <h1>Playlist Tracks</h1>
  <div class="d-flex align-items-center mb-3">
    <%= image_tag @playlist.images.first["url"], size: 200 %>
    <h2 class="ms-3"><%= @playlist.name %></h2>
  </div>

  <div class="container">
    <div class="button-group sort-by-button-group m-3">
      <button data-sort-by="original-order">original order</button>
      <button data-sort-by="bpm">BPM</button>
      <button data-sort-by="key">Song Key</button>
      <button data-sort-by="danceability">Danceability</button>
      <button data-sort-by="energy">Energy</button>
    </div>
    <div class="grid">
      <% counter = 1 %>
      <% @tracks.each do |track| %>
        <div class="grid-item-playlist shadow mb-2 p-3">
          <div class="track-features d-flex justify-content-between align-items-center">
            <h4><%= counter %>. <%= track.name  %> by <%= track.artists.first.name %></h4>
            <div>
              Key:<p class="key ms-2"><%= track.audio_features.key %></p>
              BPM:<p class="bpm ms-2"><%= track.audio_features.tempo %></p>
            </div>
            <div>
              Danceability:<p class="danceability ms-2"><%= track.audio_features.danceability %></p>
              Energy:<p class="energy ms-2"><%= track.audio_features.energy %></p>
            </div>
          </div>
        </div>
        <% counter += 1 %>
      <% end %>
    </div>
  </div>
</div>
